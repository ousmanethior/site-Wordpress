/*! jQuery carousel - v0.3.2 - 2015-02-01
* https://github.com/amazingSurge/jquery-carousel
* Copyright (c) 2015 amazingSurge; Licensed GPL 
* Modded by TheThemeBuilders added data-srcset for retina images
*
*/

!function(t,e,i,n){"use strict";var s=function(){var i,s,o="",r=!1,a=e.createElement("fakeelement"),u={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionend",transition:"transitionend"};for(i in u)if(a.style[i]!==n){s=u[i],r=!0;break}return/(WebKit)/i.test(t.navigator.userAgent)&&(o="-webkit-"),{prefix:o,end:s,supported:r}},o=function(r,a){this.element=r,this.$element=i(r),this.options=i.extend(!0,{},o.defaults,a,this.$element.data());var u=this.options.namespace;if(this.$element.addClass(u),this.$ul=this.$element.children("ul"),this.$wrap=this.$element.wrap('<div class="'+u+'-wrap" />').parent(),this.current=0,this.navNumber=this.options.navNumber,"right"===this.options.direction||"left"===this.options.direction?this.direction="horizontal":"top"!==this.options.direction&&"bottom"!==this.options.direction||(this.direction="vertical"),this.transition=s(),this.options.useCSS&&(this.transition.supported||(this.options.useCSS=!1)),null==this.options.rtl&&(this.options.rtl=function(t){if("rtl"===(""+t.attr("dir")).toLowerCase())return!0;var e=!1;return t.parents("[dir]").each(function(){if(/rtl/i.test(i(this).attr("dir")))return e=!0,!1}),e}(this.$element)),this.options.rtl&&this.$element.addClass(u+"_rtl"),this.isMoving=!1,this.type=this.options.type,void 0!==o.types[this.type]){var l=this;i.extend(l,{trigger:function(t){var e=Array.prototype.slice.call(arguments,1),i=[this].concat(e);this.$element.trigger("carousel::"+t,i);var n="on"+(t=t.replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}));"function"==typeof this.options[n]&&this.options[n].apply(this,e)},applyMethod:function(t){var e=arguments.length>1?Array.prototype.slice.call(arguments,1):[];if("function"==typeof o.types[this.type][t])return o.types[this.type][t].apply(l,e)},prepare:function(){"function"==typeof l.options.load?l.options.load(l.loadCallback):l.init.call(l)},loadCallback:function(t){var e="";i.each(t,function(t,i){e+=l.options.render(i)}),l.$ul.html(e),l.init.call(l)},init:function(){this.trigger("init"),this.applyMethod("init"),l.$items=l.$ul.children(),l.total=l.$items.length,l.build(),l.options.autoplay&&(l.autoplay.enabled=!0,l.autoplay.start()),(l.options.mousewheel||l.options.keyboard)&&l.$element.attr("tabindex","0"),l.$element.on("go",function(t,e){l.visibleNumber===l.total&&void 0===l.prevNumber&&(e.force=!0),(void 0!==e.force&&!1!==e.force||!l.isMoving)&&l.applyMethod("go",e)}),l.options.responsive&&i(t).on("resize",this.resize),this.trigger("ready")},build:function(){this.$ul.addClass(u+"-items"),this.applyMethod("build")},resize:function(){l.isMoving&&l.moveEnd(),l.trigger("resize"),l.applyMethod("resize"),l.$element.trigger("go",{index:l.current,force:!0})},autoplay:{enabled:!1,timeout:null,start:function(){l.options.infinite=!0,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){l.go()},l.options.delay)},stop:function(){clearTimeout(this.timeout)}},animate:function(e,i,n,s,o){l.options.useCSS?t.setTimeout(function(){l.insertRule(".duration_"+n+" {"+l.transition.prefix+"transition-duration:"+n+"ms;}"),e.addClass("duration_"+n+" easing_"+s).one(l.transition.end,function(){e.removeClass("duration_"+n+" easing_"+s),o.call(this)}),e.css(i)},10):e.animate(i,n,s,o)},move:function(t,e,i,n){var s={};this.isMoving=!0,this.moveEnd=function(){"function"==typeof i&&i.call(l),l.autoplay.enabled&&l.autoplay.start(),l.isMoving=!1,l.$element.trigger("moveEnd")},s[l.animateProperty]=-t,e?(this.$ul.css(s),this.moveEnd()):(void 0===n&&(n=l.options.speed),n=Math.ceil(n),this.animate(this.$ul,s,n,l.options.easing,this.moveEnd))},insertRule:function(t){if(!l.rules||!l.rules[t])if(l.rules===n?l.rules={}:l.rules[t]=!0,e.styleSheets&&e.styleSheets.length)e.styleSheets[0].insertRule(t,0);else{var i=e.createElement("style");i.innerHTML=t,e.head.appendChild(i)}}}),this.prepare(this)}};o.defaults={namespace:"carousel",type:"basic",autoplay:!0,infinite:!1,lazyload:!1,delay:4e3,speed:1e3,rtl:null,direction:"right",pager:!0,nav:!0,navNumber:1,prevText:"Previous",nextText:"Next",render:function(t){return'<li><img src="'+t.img+'" alt="" /></li>'},load:null,mousewheel:!0,touch:!0,keyboard:!0,responsive:!0,afterLazyLoad:!1,useCSS:!1,easing:"linear"},o.types={},o.registerType=function(t,e){o.types[t]=e};var r={go:function(t){var e,i;t.step?((i=this.current+t.step)>this.total-this.visibleNumber&&(i=this.options.infinite&&this.current===this.total-this.visibleNumber?0:this.total-this.visibleNumber),i<0&&(i=this.options.infinite&&0===this.current?this.total-this.visibleNumber:0)):void 0!==t.index&&(i=t.index)>this.total-this.visibleNumber&&(i=this.total-this.visibleNumber),e=this.itemSize*i,void 0===t.duration&&(t.duration=this.options.speed),this.move(e,t.force,function(){this.current=i},t.duration)},init:function(){var t=this;this.$element.on("touchend",function(e,i){var n=Math.round(i.distance/t.itemSize),s=i.current-n;s<0?s=0:s>t.total-t.visibleNumber&&(s=t.total-t.visibleNumber),t.$element.trigger("go",{index:s,duration:t.options.speed/2})})},build:function(){this.applyMethod("fillGutter"),this.$ul.css(this.animateProperty,"0")},getCssVariables:function(){return"horizontal"===this.direction?this.options.rtl?{viewport:this.$element.width(),item:this.$items.outerWidth(),before:"margin-left",after:"margin-right",animate:"right"}:{viewport:this.$element.width(),item:this.$items.outerWidth(),before:"margin-left",after:"margin-right",animate:"left"}:{viewport:this.$element.height(),item:this.$items.outerHeight(),before:"margin-top",after:"margin-bottom",animate:"top"}},fillGutter:function(){var t=this.applyMethod("getCssVariables");this.visibleNumber=Math.floor(t.viewport/t.item),0===this.visibleNumber&&(this.visibleNumber=1),this.total<this.visibleNumber&&(this.visibleNumber=this.total),this.navNumber>this.visibleNumber||0===this.navNumber?this.navNumber=this.visibleNumber:this.options.navNumber<this.visibleNumber&&(this.navNumber=this.options.navNumber);var e=Math.round((t.viewport/this.visibleNumber-t.item)/2),i={};e<0&&(e=0),i[t.before]=e,i[t.after]=e,this.$items.css(i),this.itemSize=t.item+2*e,this.viewportSize=t.viewport,this.animateProperty=t.animate},resize:function(){this.applyMethod("fillGutter")}};o.registerType("basic",r),o.registerType("circular",i.extend(!0,{},r,{go:function(t){var e,i,n;t.step?(n=t.step,(i=this.current+t.step)>=this.total&&(i-=this.total),i<0&&(i+=this.total)):void 0!==t.index&&(n=(i=t.index)-this.current)<-this.visibleNumber&&this.current+this.visibleNumber>=this.total&&(n=i+this.total-this.current),this.applyMethod("allowance",n),e=(i-this.prevNumber>=this.visibleNumber?i-this.prevNumber:i+this.total-this.prevNumber)*this.itemSize,void 0===t.duration&&(t.duration=this.options.speed),this.move(e,t.force,function(){this.current=i},t.duration)},allowance:function(t){var e,n,s,o=this.prevNumber+this.visibleNumber,r=this.$defaultItems.clone(!0),a=this,u=function(t,e,i){return(t+=e)>=i?t-=i:t<0&&(t+=i),t};if(o>=this.total&&(o-=this.total),t>0){var l=function(t){for(e=0;e<t;e++)(n=e+a.nextNumber)>=a.total&&(n-=a.total),i(r[n]).appendTo(a.$ul),a.$ul.children().first().remove();a.nextNumber=u(a.nextNumber,t,a.total),a.prevNumber=u(a.prevNumber,t,a.total),a.$ul.css(a.animateProperty,-(a.current-a.prevNumber)*a.itemSize)};this.current+t>=this.total?l(s=this.total-this.prevNumber>this.visibleNumber?this.total-this.prevNumber-this.visibleNumber:this.visibleNumber):o+this.visibleNumber<=this.current+t&&l(this.visibleNumber)}else if(t<0){o>this.current+t&&(s=this.visibleNumber,this.current+t<this.visibleNumber&&this.current+t>=0&&(s=this.visibleNumber-(this.total-this.prevNumber<this.visibleNumber?this.total-this.prevNumber:0)),function(t){for(e=0;e<t;e++)(n=a.prevNumber-1-e)<0&&(n+=a.total),i(r[n]).prependTo(a.$ul),a.$ul.children().last().remove();a.nextNumber=u(a.nextNumber,-t,a.total),a.prevNumber=u(a.prevNumber,-t,a.total),a.$ul.css(a.animateProperty,-(a.visibleNumber+t+a.current-o)*a.itemSize)}(s))}},init:function(){this.step=0;var t=this;this.$element.on("touchmove",function(e,i){for(var n,s=Math.round(i.distance/t.itemSize),o=i.current-s;o<0;)o+=t.total;for(;o>=t.total;)o-=t.total;if(n=o-t.current,t.current-o==t.total-1&&s<t.step?n=1:o-t.current==t.total-1&&s>t.step&&(n=-1),0!==n){var r=t.prevNumber,a=t.viewportSize;t.step=s,t.applyMethod("allowance",n),r!==t.prevNumber?(n>0&&0===o&&(a=(t.total-t.visibleNumber-r)*t.itemSize),n<0&&(a=-a,o<t.visibleNumber&&o>=0&&(a=-(t.visibleNumber-(t.total-r<t.visibleNumber?t.total-r:0))*t.itemSize)),i.position+=a):t.total===t.visibleNumber&&(n>0&&o%t.visibleNumber==0&&(i.position+=a),o===t.visibleNumber-1&&n<0&&(i.position-=a))}t.current=o}).on("touchend",function(e,i){if(0!==i.distance){for(var n=Math.round(i.distance/t.itemSize),s=i.current-n;s<0;)s+=t.total;for(;s>=t.total;)s-=t.total;t.step=0,t.$element.trigger("go",{index:s,duration:t.options.speed/2})}})},build:function(){var t;for(this.applyMethod("fillGutter"),this.prevNumber=this.total-this.visibleNumber,this.nextNumber=this.visibleNumber+(this.total%this.visibleNumber==0?0:this.visibleNumber-this.total%this.visibleNumber),t=0;t<this.visibleNumber;t++)i(this.$items[this.total-t-1]).clone(!0).prependTo(this.$ul);for(t=0;t<this.nextNumber;t++)t>=this.total&&(this.nextNumber-=this.total,t-=this.total),i(this.$items[t]).clone(!0).appendTo(this.$ul);this.$defaultItems=this.$items,this.$items=this.$ul.children(),this.$ul.css(this.animateProperty,-this.viewportSize)},resize:function(){var t=this.visibleNumber;this.applyMethod("fillGutter"),t!==this.visibleNumber&&(this.$ul.html(this.$defaultItems),this.$items=this.$defaultItems,this.applyMethod("build"))}})),o.prototype={constructor:o,next:function(t){(void 0===t||0===t||t>this.navNumber)&&(t=this.navNumber),this.$element.trigger("go",{step:t})},prev:function(t){(void 0===t||0===t||t>this.navNumber)&&(t=this.navNumber),this.$element.trigger("go",{step:-t})},go:function(){"right"!==this.options.direction&&"bottom"!==this.options.direction||this.next(),"left"!==this.options.direction&&"top"!==this.options.direction||this.prev()},goTo:function(t){this.$element.trigger("go",{index:t})},play:function(){this.autoplay.enabled=!0,this.autoplay.start()},pause:function(){this.autoplay.stop()},stop:function(){this.autoplay.enabled=!1,this.autoplay.stop()},destroy:function(){this.$trigger.remove(),this.$element.data("carousel",null)}},i.fn.carousel=function(t){if("string"==typeof t){var e=t,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=i.data(this,"carousel");t&&"function"==typeof t[e]&&t[e].apply(t,n)})}return this.each(function(){i.data(this,"carousel")||i.data(this,"carousel",new o(this,t))})}}(window,document,jQuery),function(t,e,i,n){var s=jQuery(e),o={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;return e in o.map&&"function"==typeof o.map[e]&&o.map[e](t),!1},attach:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&((i=e.toUpperCase())in o.keys?o.map[o.keys[i]]=t[e]:o.map[i]=t[e]);o.bound||(o.bound=!0,s.bind("keydown",o.press))},detach:function(){o.bound=!1,o.map={},s.unbind("keydown",o.press)}};s.on("carousel::ready",function(t,e){!0===e.options.keyboard&&e.$element.on("focus",function(){return o.attach({left:function(){e.prev()},right:function(){e.next()},up:function(){e.prev()},down:function(){e.next()}}),!1}).on("blur",function(){o.detach()})})}(window,document),function(t,e,i,n){i(e).on("carousel::ready",function(t,e){!0===e.options.lazyload&&new function(t){return{setup:function(){var e=this;t.$items.each(function(){var n=i(this),s=n.find('img[data-lazyload="true"]');s.length&&(n.addClass(t.options.namespace+"_loading"),e.preload(n,s,s.length))})},preload:function(e,n,s){var o=0,r=this;n.each(function(){var n=i(this),a=function(){++o===s&&e.removeClass(t.options.namespace+"_loading"),n.data("lazyload","loaded"),n.removeAttr("data-src"),n.get(0).hasAttribute("data-srcset")&&n.removeAttr("data-srcset"),"function"==typeof t.options.afterLazyLoad&&t.options.afterLazyLoad.apply(this,[t.$element])};"string"!=typeof n.data("src")?a():r.isCompleted(this)?a():(n.on("load error",function(t){a(),n.unbind("load error")}),this.src=i(this).data("src"),i(this).get(0).hasAttribute("data-srcset")&&(this.srcset=i(this).data("srcset")))})},isCompleted:function(t){return!!t.complete&&(void 0===t.naturalWidth||0!==t.naturalWidth)}}}(e).setup()})}(window,document,jQuery),function(t,e,i,n){i(e).on("carousel::ready",function(t,e){var i;!0===e.options.mousewheel&&(i=e,{setup:function(){var t=i.$element.get(0),e=function(t){var e=0;t.preventDefault?t.preventDefault():(t.returnValue=!1,t.cancelBubble=!0),t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e>0?i.prev():e<0&&i.next()};i.$element.on("focus",function(){t.addEventListener?(t.addEventListener("mousewheel",e,!1),t.addEventListener("DOMMouseScroll",e,!1)):t.attachEvent&&t.attachEvent("onmousewheel",e)}).on("blur",function(){t.addEventListener?(t.removeEventListener("mousewheel",e,!1),t.removeEventListener("DOMMouseScroll",e,!1)):t.attachEvent&&t.detachEvent("onmousewheel",e)})}}).setup()})}(window,document,jQuery),function(t,e,i,n){i(e).on("carousel::ready",function(t,e){if(!0===e.options.pager){var n=(s=e,{setup:function(){this.current=0,this.$pager=i('<ul class="'+s.options.namespace+'-pager" />'),this.build(),this.$pager.appendTo(s.$wrap),this.bind(),this.active(this.current)},build:function(){for(var t=[],e=Math.ceil(s.total/s.visibleNumber),i=1;i<=e;i++)t+="<li><a href='#'>"+i+"</a></li>";this.$pager.html(t),this.$items=this.$pager.children()},update:function(){this.build();var t=Math.floor(s.current/s.visibleNumber);this.active(t)},bind:function(){var t=this;this.$pager.on("click","li",function(){var t=i(this).index()*s.visibleNumber;return s.goTo(t),!1}),s.$element.on("moveEnd",function(e){var i=Math.floor(s.current/s.visibleNumber);s.current===s.total-s.visibleNumber&&void 0===s.prevNumber&&(i=Math.ceil(s.total/s.visibleNumber)-1),i!==this.current&&t.active(i)})},active:function(t){this.current=t,this.$items.removeClass(s.options.namespace+"-pager-active").eq(t).addClass(s.options.namespace+"-pager-active")}});n.setup(),e.$element.on("carousel::resize",function(t){n.update()})}var s})}(window,document,jQuery),function(t,e,i,n){i(e).on("carousel::ready",function(t,e){var n;!0===e.options.nav&&(n=e,{setup:function(){var t=n.options.namespace;this.$nav=i('<div class="'+t+'-nav"><a href="#" class="'+t+'-nav-prev">'+n.options.prevText+'</a><a href="#" class="'+t+'-nav-next">'+n.options.nextText+"</a></div>"),this.$nav.appendTo(n.$wrap),this.$nav.on("click","a",function(){return i(this).is("."+t+"-nav-prev")?n.prev():n.next(),!1})}}).setup()})}(window,document,jQuery),function(t,e,i,n){i(e).on("carousel::ready",function(n,s){!0===s.options.touch&&new function(n){return{supported:"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch,eventType:function(t){return{start:this.supported?"touchstart":"mousedown",move:this.supported?"touchmove":"mousemove",end:this.supported?"touchend":"mouseup",cancel:this.supported?"touchcancel":"mouseout"}[t]},setup:function(){this.supported||(e.ondragstart=function(){return!1}),n.$element.on(this.eventType("start"),i.proxy(this.start,this)),n.$element.find("a").on(this.eventType("start"),function(t){this.timeStamp=t.timeStamp}).on("click",function(t){t.timeStamp-this.timeStamp>400&&t.preventDefault()})},getEvent:function(t){var e=t.originalEvent;return this.supported&&e.touches.length&&e.touches[0]&&(e=e.touches[0]),e},start:function(t){if(!n.isMoving){n.autoplay.enabled&&n.autoplay.stop();var s=this.getEvent(t);this.data={},"horizontal"===n.direction?this.data.start=s.pageX:"vertical"===n.direction&&(this.data.start=s.pageY),this.data.position=parseInt(n.$ul.css(n.animateProperty),10),this.data.current=n.current,this.data.distance=0,i(e).on(this.eventType("move"),i.proxy(this.move,this)).on(this.eventType("end"),i.proxy(this.end,this))}},move:function(t){var e=this.getEvent(t);"horizontal"===n.direction?(this.data.distance=(e.pageX||this.data.start)-this.data.start,n.options.rtl&&(this.data.distance=-this.data.distance)):"vertical"===n.direction&&(this.data.distance=(e.pageY||this.data.start)-this.data.start),n.$element.trigger("touchmove",this.data),n.$ul.css(n.animateProperty,this.data.distance+this.data.position)},end:function(){i(e).off(this.eventType("move")).off(this.eventType("end")),n.$element.trigger("touchend",this.data)}}}(s).setup()})}(window,document,jQuery);