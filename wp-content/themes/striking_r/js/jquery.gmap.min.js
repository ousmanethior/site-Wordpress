/*
* jquery.gmap
* Version 2.1.5 2013-10-30
* @requires jQuery >= 1.6.1 or later
*
* Adapted by the ThemeBuilders
*
* Homepage: http://labs.mario.ec/jquery-gmap/
* Author: Mario Estrada <me@mario.ec>
* License: MIT
*/
!function(e){e.fn.gMap=function(a,o){switch(a){case"addMarker":return e(this).trigger("gMap.addMarker",[o.latitude,o.longitude,o.content,o.icon,o.popup]);case"centerAt":return e(this).trigger("gMap.centerAt",[o.latitude,o.longitude,o.zoom]);case"clearMarkers":return e(this).trigger("gMap.clearMarkers")}var n=e.extend({},e.fn.gMap.defaults,a);return this.each(function(){var a=new google.maps.Map(this);e(this).data("gMap.reference",a);var o=new google.maps.Geocoder;n.address?o.geocode({address:n.address},function(e,o){e&&e.length&&a.setCenter(e[0].geometry.location)}):n.latitude&&n.longitude?a.setCenter(new google.maps.LatLng(n.latitude,n.longitude)):e.isArray(n.markers)&&n.markers.length>0?n.markers[0].address?o.geocode({address:n.markers[0].address},function(e,o){e&&e.length>0&&a.setCenter(e[0].geometry.location)}):a.setCenter(new google.maps.LatLng(n.markers[0].latitude,n.markers[0].longitude)):a.setCenter(new google.maps.LatLng(34.885931,9.84375)),a.setZoom(n.zoom),!0===n.keepcenter&&google.maps.event.addDomListener(window,"resize",function(){var e=a.getCenter();google.maps.event.trigger(a,"resize"),void 0!==e&&a.setCenter(e)}),a.setMapTypeId(google.maps.MapTypeId[n.maptype]);var t={scrollwheel:n.scrollwheel,disableDoubleClickZoom:!n.doubleclickzoom};if(!1===n.controls?e.extend(t,{disableDefaultUI:!0}):0!==n.controls.length&&e.extend(t,n.controls,{disableDefaultUI:!0}),!1===n.draggable&&e.extend(t,{draggable:!1}),!0!==n.draggable&&!1!==n.draggable&&("string"==typeof n.draggable&&(n.draggable=parseInt(n.draggable.replace(/\D+/g,""))),!isNaN(n.draggable)&&n.draggable>0&&(e(document).width()<=n.draggable&&e.extend(t,{draggable:!1}),google.maps.event.addDomListener(window,"resize",function(){var o=e(document).width()>n.draggable;if(!1===o)t={draggable:o};else var t={draggable:!0};a.setOptions(t)}))),a.setOptions(t),!0===n.blackwhite){var r=[{stylers:[{hue:"#fff"},{saturation:-100},{lightness:0},{gamma:1}]}],s=new google.maps.StyledMapType(r,{name:"Styled Map"});a.mapTypes.set("map_style",s),a.setMapTypeId("map_style")}var g,i,l=new google.maps.Marker;(g=new google.maps.MarkerImage(n.icon.image)).size=new google.maps.Size(n.icon.iconsize[0],n.icon.iconsize[1]),g.anchor=new google.maps.Point(n.icon.iconanchor[0],n.icon.iconanchor[1]),l.setIcon(g),n.icon.shadow&&((i=new google.maps.MarkerImage(n.icon.shadow)).size=new google.maps.Size(n.icon.shadowsize[0],n.icon.shadowsize[1]),i.anchor=new google.maps.Point(n.icon.shadowanchor[0],n.icon.shadowanchor[1]),l.setShadow(i)),e(this).bind("gMap.centerAt",function(e,o,n,t){t&&a.setZoom(t),a.panTo(new google.maps.LatLng(parseFloat(o),parseFloat(n)))});var d=[];e(this).bind("gMap.clearMarkers",function(){for(;d[0];)d.pop().setMap(null)});var c;e(this).bind("gMap.addMarker",function(e,o,t,r,s,g){var i,p,m=new google.maps.LatLng(parseFloat(o),parseFloat(t)),h=new google.maps.Marker({position:m});if(s?((i=new google.maps.MarkerImage(s.image)).size=new google.maps.Size(s.iconsize[0],s.iconsize[1]),i.anchor=new google.maps.Point(s.iconanchor[0],s.iconanchor[1]),h.setIcon(i),s.shadow&&((p=new google.maps.MarkerImage(s.shadow)).size=new google.maps.Size(s.shadowsize[0],s.shadowsize[1]),p.anchor=new google.maps.Point(s.shadowanchor[0],s.shadowanchor[1]),l.setShadow(p))):(h.setIcon(l.getIcon()),h.setShadow(l.getShadow())),r){"_latlng"===r&&(r=o+", "+t);var w=new google.maps.InfoWindow({content:n.html_prepend+r+n.html_append});google.maps.event.addListener(h,"click",function(){c&&c.close(),w.open(a,h),c=w}),g&&google.maps.event.addListenerOnce(a,"tilesloaded",function(){w.open(a,h)})}h.setMap(a),d.push(h)});for(var p,m=this,h=0;h<n.markers.length;h++)(p=n.markers[h]).address?("_address"===p.html&&(p.html=p.address),o.geocode({address:p.address},function(a){return function(o,n){o&&o.length>0&&e(m).trigger("gMap.addMarker",[o[0].geometry.location.lat(),o[0].geometry.location.lng(),a.html,a.icon,a.popup])}}(p))):e(this).trigger("gMap.addMarker",[p.latitude,p.longitude,p.html,p.icon,p.popup])})},e.fn.gMap.defaults={address:"",latitude:0,longitude:0,zoom:1,markers:[],controls:[],scrollwheel:!1,draggable:!0,doubleclickzoom:!0,keepcenter:!0,blackwhite:!1,maptype:"ROADMAP",html_prepend:'<div class="gmap_marker">',html_append:"</div>",icon:{image:"https://www.google.com/mapfiles/marker.png",shadow:"https://www.google.com/mapfiles/shadow50.png",iconsize:[20,34],shadowsize:[37,34],iconanchor:[9,34],shadowanchor:[6,34]}}}(jQuery);